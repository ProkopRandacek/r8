# vim: ft=make

OPENVR_DIR     ?= ./openvr
OPENVR_LIBRARY ?= $(OPENVR_DIR)/bin/linux64/libopenvr_api.a

LIBRARIES += $(OPENVR_LIBRARY)

openvr: $(OPENVR_LIBRARY)

$(OPENVR_LIBRARY):
	cd $(OPENVR_DIR)/ && \
		cmake BUILD_SHARED=OFF . && \
		$(MAKE) -j$(shell nproc)

# cmake doesn't create a clean rule apparently
deepclean::
	cd $(OPENVR_DIR)/ && $(RM) CMakeCache.txt cmake_install.cmake Makefile CMakeFiles -r

LDLIBS += $(OPENVR_LIBRARY)
CFLAGS += -I$(OPENVR_DIR)/headers

